# æ–‡ä»¶ä¸Šä¼ åˆ†æåŠŸèƒ½è®¾è®¡

> åˆ›å»ºæ—¥æœŸ: 2026-02-02

## æ¦‚è¿°

åœ¨ç°æœ‰ GitHub URL åˆ†æçš„åŸºç¡€ä¸Šï¼Œæ–°å¢æœ¬åœ°æ–‡ä»¶ä¸Šä¼ åˆ†æåŠŸèƒ½ã€‚ç”¨æˆ·å¯ä»¥ä¸Šä¼  ZIP å‹ç¼©åŒ…ï¼Œç³»ç»Ÿè§£æåè®©ç”¨æˆ·ä»ä¸‹æ‹‰æ¡†é€‰æ‹©èµ·å§‹æ–‡ä»¶å’Œç»“æ„ä½“ï¼Œç„¶åè¿›è¡Œåˆ†æã€‚

## ç”¨æˆ·æµç¨‹

```
1. ç”¨æˆ·ç‚¹å‡»"æ–°å»ºåˆ†æ" â†’ æ‰“å¼€åˆ›å»ºå¼¹çª—
2. é€‰æ‹© "AI åˆ†æ" Tab
3. åˆ‡æ¢åˆ° "ä»æœ¬åœ°æ–‡ä»¶" æ¨¡å¼
4. æ‹–æ‹½æˆ–ç‚¹å‡»ä¸Šä¼  ZIP æ–‡ä»¶ (â‰¤100MB)
5. åç«¯è§£æ ZIP â†’ è¿”å›æ–‡ä»¶æ ‘ + ç»“æ„ä½“åˆ—è¡¨
6. ç”¨æˆ·ä»ä¸‹æ‹‰æ¡†é€‰æ‹©ï¼š
   - èµ·å§‹æ–‡ä»¶ (å¦‚ internal/model/user.go)
   - èµ·å§‹ç»“æ„ä½“ (å¦‚ User) -- è”åŠ¨ä¸‹æ‹‰æ¡†ï¼Œä»…æ˜¾ç¤ºæ‰€é€‰æ–‡ä»¶ä¸­çš„ç»“æ„ä½“
7. é€‰æ‹©åˆ†ææ·±åº¦å’Œ AI æ¨¡å‹
8. ç‚¹å‡»"å¼€å§‹åˆ†æ" â†’ è¿›å…¥è¿›åº¦é¡µé¢
```

## API è®¾è®¡

### æ–°å¢æ¥å£ï¼šä¸Šä¼ å¹¶è§£æ ZIP

```
POST /api/v1/upload/parse
Content-Type: multipart/form-data

Request:
  - file: ZIP æ–‡ä»¶ (â‰¤100MB)

Response (æˆåŠŸ):
{
  "code": 0,
  "data": {
    "upload_id": "abc123",
    "expires_at": "2026-02-02T13:30:00Z",
    "files": [
      {
        "path": "internal/model/user.go",
        "structs": ["User", "UserProfile", "UserSettings"]
      },
      {
        "path": "internal/service/auth.go",
        "structs": ["AuthService", "TokenClaims"]
      }
    ],
    "total_files": 15,
    "total_structs": 42
  }
}

Response (å¤±è´¥):
{
  "code": 1000,
  "message": "ZIP æ–‡ä»¶æŸåæˆ–æ— æ³•è§£å‹"
}
```

### æ‰©å±•ç°æœ‰æ¥å£ï¼šåˆ›å»ºåˆ†æ

```
POST /api/v1/analyses

// åŸæœ‰æ–¹å¼ - GitHub URL
{
  "title": "Gin Framework Analysis",
  "creation_type": "ai",
  "source_type": "github",
  "repo_url": "https://github.com/gin-gonic/gin",
  "start_file": "gin.go",
  "start_struct": "Engine",
  "analysis_depth": 3,
  "model_name": "gpt-3.5-turbo"
}

// æ–°å¢æ–¹å¼ - æ–‡ä»¶ä¸Šä¼ 
{
  "title": "My Project Analysis",
  "creation_type": "ai",
  "source_type": "upload",
  "upload_id": "abc123",
  "start_file": "internal/model/user.go",
  "start_struct": "User",
  "analysis_depth": 3,
  "model_name": "gpt-3.5-turbo"
}
```

## é”™è¯¯å¤„ç†

### æ–‡ä»¶ä¸Šä¼ é˜¶æ®µ

| é”™è¯¯åœºæ™¯ | å‰ç«¯å¤„ç† | åç«¯å“åº” |
|---------|---------|---------|
| æ–‡ä»¶è¶…è¿‡ 100MB | ä¸Šä¼ å‰æ‹¦æˆªï¼Œæç¤º"æ–‡ä»¶è¿‡å¤§" | ä¸ä¼šåˆ°è¾¾åç«¯ |
| é ZIP æ ¼å¼ | æ£€æŸ¥æ‰©å±•å `.zip` | `code: 1000, message: "ä»…æ”¯æŒ ZIP æ ¼å¼"` |
| ZIP æŸå/æ— æ³•è§£å‹ | - | `code: 1000, message: "ZIP æ–‡ä»¶æŸå"` |
| ZIP å†…æ—  .go æ–‡ä»¶ | - | `code: 1000, message: "æœªæ‰¾åˆ° Go æºæ–‡ä»¶"` |
| ç½‘ç»œä¸­æ–­ | æ˜¾ç¤ºé‡è¯•æŒ‰é’® | - |
| æœåŠ¡å™¨å­˜å‚¨å·²æ»¡ | - | `code: 5000, message: "æœåŠ¡å™¨æš‚æ—¶ä¸å¯ç”¨"` |

### GitHub å…‹éš†é˜¶æ®µ

| é”™è¯¯åœºæ™¯ | åç«¯å“åº” | WebSocket æ¨é€ |
|---------|---------|---------------|
| URL æ ¼å¼æ— æ•ˆ | åˆ›å»ºæ—¶ç«‹å³è¿”å›é”™è¯¯ | - |
| ä»“åº“ä¸å­˜åœ¨ | - | `status: failed, step: cloning, error: "ä»“åº“ä¸å­˜åœ¨"` |
| ç§æœ‰ä»“åº“æ— æƒé™ | - | `status: failed, step: cloning, error: "æ— æƒè®¿é—®è¯¥ä»“åº“"` |
| ç½‘ç»œè¶…æ—¶ | - | `status: failed, step: cloning, error: "å…‹éš†è¶…æ—¶ï¼Œè¯·ç¨åé‡è¯•"` |
| ä»“åº“è¿‡å¤§ | - | `status: failed, step: cloning, error: "ä»“åº“è¿‡å¤§ï¼Œè¯·ä½¿ç”¨æ–‡ä»¶ä¸Šä¼ "` |

### åˆ†æé˜¶æ®µï¼ˆä¸¤ç§æ¨¡å¼å…±ç”¨ï¼‰

| é”™è¯¯åœºæ™¯ | å¤„ç†æ–¹å¼ |
|---------|---------|
| èµ·å§‹ç»“æ„ä½“ä¸å­˜åœ¨ | `step: parsing, error: "æœªæ‰¾åˆ°ç»“æ„ä½“ 'XXX'"` |
| ä»£ç è¯­æ³•é”™è¯¯ | `step: parsing, error: "Go è¯­æ³•é”™è¯¯: xxx.go:123"` |
| AI API è°ƒç”¨å¤±è´¥ | `step: analyzing, error: "AI æœåŠ¡æš‚æ—¶ä¸å¯ç”¨"` |
| OSS ä¸Šä¼ å¤±è´¥ | `step: uploading, error: "ç»“æœä¿å­˜å¤±è´¥"` |

### å‰ç«¯é”™è¯¯å±•ç¤º

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âŒ åˆ†æå¤±è´¥                             â”‚
â”‚                                         â”‚
â”‚  é”™è¯¯åŸå› ï¼šä»“åº“ä¸å­˜åœ¨æˆ–æ— æƒè®¿é—®            â”‚
â”‚                                         â”‚
â”‚  [é‡æ–°åˆ†æ]  [è¿”å›å·¥ä½œå°]                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## å‰ç«¯ UI è®¾è®¡

### AI åˆ†æ Tab - æœ¬åœ°æ–‡ä»¶æ¨¡å¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AI è‡ªåŠ¨åˆ†æ    æ‰‹åŠ¨åˆ›å»º                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚  æ•°æ®æ¥æº:  â—‹ ä» GitHub    â— ä»æœ¬åœ°æ–‡ä»¶              â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                                             â”‚   â”‚
â”‚  â”‚     ğŸ“ æ‹–æ‹½ ZIP æ–‡ä»¶åˆ°æ­¤å¤„                   â”‚   â”‚
â”‚  â”‚        æˆ– ç‚¹å‡»é€‰æ‹©æ–‡ä»¶                       â”‚   â”‚
â”‚  â”‚                                             â”‚   â”‚
â”‚  â”‚     æ”¯æŒ .zip æ ¼å¼ï¼Œæœ€å¤§ 100MB               â”‚   â”‚
â”‚  â”‚                                             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ä¸Šä¼ æˆåŠŸåæ˜¾ç¤º â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€            â”‚
â”‚                                                     â”‚
â”‚  èµ·å§‹æ–‡ä»¶:    [internal/model/user.go      â–¼]      â”‚
â”‚                                                     â”‚
â”‚  èµ·å§‹ç»“æ„ä½“:  [User                        â–¼]      â”‚
â”‚               â””â”€â”€ è”åŠ¨ï¼šä»…æ˜¾ç¤ºæ‰€é€‰æ–‡ä»¶ä¸­çš„ç»“æ„ä½“     â”‚
â”‚                                                     â”‚
â”‚  åˆ†ææ·±åº¦:    â—‹1   â—‹3   â—‹5   â—‹10                   â”‚
â”‚                                                     â”‚
â”‚  AI æ¨¡å‹:     [gpt-3.5-turbo              â–¼]      â”‚
â”‚                                                     â”‚
â”‚                              [å¼€å§‹åˆ†æ]             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### AI åˆ†æ Tab - GitHub æ¨¡å¼ï¼ˆä¿æŒåŸæ ·ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ•°æ®æ¥æº:  â— ä» GitHub    â—‹ ä»æœ¬åœ°æ–‡ä»¶              â”‚
â”‚                                                     â”‚
â”‚  ä»“åº“åœ°å€:  [https://github.com/gin-gonic/gin  ]   â”‚
â”‚                                                     â”‚
â”‚  èµ·å§‹ç»“æ„ä½“: [Engine                          ]     â”‚
â”‚                                                     â”‚
â”‚  åˆ†ææ·±åº¦:   â—‹1   â—‹3   â—‹5   â—‹10                    â”‚
â”‚  ...                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### çŠ¶æ€æµè½¬

```
åˆå§‹çŠ¶æ€ â†’ æ–‡ä»¶æ‹–å…¥ â†’ ä¸Šä¼ ä¸­(æ˜¾ç¤ºè¿›åº¦æ¡) â†’ è§£æä¸­ â†’ è§£æå®Œæˆ(æ˜¾ç¤ºä¸‹æ‹‰æ¡†)
                â†“
           ä¸Šä¼ å¤±è´¥ â†’ æ˜¾ç¤ºé”™è¯¯ + é‡è¯•æŒ‰é’®
```

## æ–‡ä»¶å­˜å‚¨ç­–ç•¥

- ä¸Šä¼ çš„ ZIP æš‚å­˜åœ¨æœåŠ¡å™¨ä¸´æ—¶ç›®å½• (å¦‚ `/tmp/uploads/{upload_id}/`)
- è§£æå®Œæˆåè¿”å› `upload_id`ï¼Œç”¨äºåç»­åˆ†æ
- åˆ†æå®Œæˆåï¼ˆæˆ–è¶…æ—¶ 1 å°æ—¶ï¼‰è‡ªåŠ¨æ¸…ç†ä¸´æ—¶æ–‡ä»¶

## å®ç°æ¸…å•

### åç«¯æ”¹åŠ¨

| æ–‡ä»¶ | æ”¹åŠ¨ |
|------|------|
| `internal/api/handler/upload.go` | æ–°å»º - å¤„ç† ZIP ä¸Šä¼ å’Œè§£æ |
| `internal/service/upload_service.go` | æ–°å»º - ZIP è§£æé€»è¾‘ï¼Œæå–æ–‡ä»¶å’Œç»“æ„ä½“ |
| `internal/model/dto/upload_dto.go` | æ–°å»º - ä¸Šä¼ ç›¸å…³çš„è¯·æ±‚/å“åº”ç»“æ„ |
| `internal/model/dto/analysis_dto.go` | ä¿®æ”¹ - æ·»åŠ  `source_type`, `upload_id`, `start_file` å­—æ®µ |
| `internal/service/analysis_service.go` | ä¿®æ”¹ - æ”¯æŒä» upload_id è·å–æ–‡ä»¶è·¯å¾„ |
| `internal/worker/processor.go` | ä¿®æ”¹ - æ”¯æŒæœ¬åœ°æ–‡ä»¶åˆ†æï¼ˆè·³è¿‡å…‹éš†æ­¥éª¤ï¼‰ |
| `internal/api/router.go` | ä¿®æ”¹ - æ³¨å†Œæ–°è·¯ç”± `/upload/parse` |
| `config/config.go` | ä¿®æ”¹ - æ·»åŠ ä¸Šä¼ é…ç½®ï¼ˆå¤§å°é™åˆ¶ã€ä¸´æ—¶ç›®å½•ã€è¿‡æœŸæ—¶é—´ï¼‰ |

### å‰ç«¯æ”¹åŠ¨

| æ–‡ä»¶ | æ”¹åŠ¨ |
|------|------|
| `src/components/Workspace/ConfigForm.tsx` | é‡æ„ - æ·»åŠ æ•°æ®æ¥æºåˆ‡æ¢å’Œæ–‡ä»¶ä¸Šä¼ åŒº |
| `src/services/uploadService.ts` | æ–°å»º - ä¸Šä¼  API è°ƒç”¨ |
| `src/types/api.ts` | ä¿®æ”¹ - æ·»åŠ ä¸Šä¼ ç›¸å…³ç±»å‹å®šä¹‰ |

### é…ç½®é¡¹æ–°å¢

```yaml
upload:
  max_size: 104857600  # 100MB
  temp_dir: /tmp/uploads
  expire_hours: 1
  allowed_extensions:
    - .zip
```
